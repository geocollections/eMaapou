<template>
  <v-row justify="center">
    <v-col sm="8" md="6" class="text-center">
      <h1 class="text-h4">
        {{ title }}
      </h1>
      <div class="montserrat">{{ error.message }}</div>
      <search-from-quick class="my-4" @submit="handleSearch" />
      <NuxtLink to="/" class="text-link-grey montserrat">
        {{ $t('common.backToLanding') }}
      </NuxtLink>
    </v-col>
  </v-row>
</template>

<script>
import isEmpty from 'lodash/isEmpty'
export default {
  layout: 'empty',
  props: {
    error: {
      type: Object,
      default: null,
    },
  },
  data() {
    return {
      pageNotFound: '404 Not Found',
      otherError: 'An error occurred',
    }
  },
  head() {
    const title =
      this.error.statusCode === 404 ? this.pageNotFound : this.otherError
    return {
      title,
    }
  },
  computed: {
    title() {
      return this.error.statusCode === 404 ? this.pageNotFound : this.otherError
    },
  },
  methods: {
    handleSearch() {
      const routeName = this.$route.name.includes('search')
        ? this.$route.name.split('__')[0]
        : 'search'
      const query = isEmpty(this.search)
        ? { ...this.$route.query }
        : { ...this.$route.query, q: this.search }
      this.$router.push(this.localePath({ name: routeName, query }))
    },
  },
}
</script>

<style scoped>
h1 {
  font-size: 20px;
}
</style>
